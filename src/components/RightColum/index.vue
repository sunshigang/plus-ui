<template>
    <div class="rightSidebar" v-show="layerManagementShowHide" v-hasPermi="['screen:function:review']">
        <div class="layerTitle">
            <span class="layerTitleFont">ÂõæÂ±ÇÁÆ°ÁêÜ</span>
        </div>
        <div class="layerContentBody">
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">È£éÊôØÂå∫ÊôØÁÇπ</div>
                    <el-checkbox v-model="isAllCheckedA" class="scroll-custom-checkbox"
                        @change="handleAllCheckA"></el-checkbox>
                    <div :class="layerContentStyleA == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentA"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleA" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsA" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.name }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeA(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">ÊñáÂåñËµÑÊ∫êÂàÜÂ∏ÉÁé∞Áä∂</div>
                    <el-checkbox v-model="isAllCheckedB" class="scroll-custom-checkbox"
                        @change="handleAllCheckB"></el-checkbox>
                    <div :class="layerContentStyleB == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentB"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleB" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsB" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.name }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeB(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">Áé∞Áä∂‰∫§ÈÄöÂõæ</div>
                    <el-checkbox v-model="isAllCheckedC" class="scroll-custom-checkbox"
                        @change="handleAllCheckC"></el-checkbox>
                    <div :class="layerContentStyleC == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentC"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleC" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsC" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.name }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeC(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">Ê∏∏ËµèËßÑÂàí</div>
                    <el-checkbox v-model="isAllCheckedD" class="scroll-custom-checkbox"
                        @change="handleAllCheckD"></el-checkbox>
                    <div :class="layerContentStyleD == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentD"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleD" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsD" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.name }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeD(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">‰∏ªË¶ÅÊôØËßÇÊ∏∏ËµèÁ∫ø</div>
                    <el-checkbox v-model="isAllCheckedE" class="scroll-custom-checkbox"
                        @change="handleAllCheckE"></el-checkbox>
                    <div :class="layerContentStyleE == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentE"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleE" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsE" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.name }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeE(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">ÁîüÊÄÅ‰øùÊä§Á∫¢Á∫ø</div>
                    <el-checkbox v-model="isAllCheckedJ" class="scroll-custom-checkbox"
                        @change="handleAllCheckJ"></el-checkbox>
                    <div :class="layerContentStyleJ == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentJ"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleJ" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsJ" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.name }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeJ(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">ÂàÜÁ∫ß‰øùÊä§ËßÑÂàí</div>
                    <el-checkbox v-model="isAllCheckedI" class="scroll-custom-checkbox"
                        @change="handleAllCheckI"></el-checkbox>
                    <div :class="layerContentStyleI == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentI"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleI" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsI" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.name }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeI(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">ÊôØÂå∫ËåÉÂõ¥</div>
                    <el-checkbox v-model="isAllCheckedK" class="scroll-custom-checkbox"
                        @change="handleAllCheckK"></el-checkbox>
                    <div :class="layerContentStyleK == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentK"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleK" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsK" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.name }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeK(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">ÂúüÂú∞Âà©Áî®Áé∞Áä∂</div>
                    <el-checkbox v-model="isAllCheckedF" class="scroll-custom-checkbox"
                        @change="handleAllCheckF"></el-checkbox>
                    <div :class="layerContentStyleF == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentF"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleF" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsF" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.label }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeF(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">Ê∏∏ËµèÁªìÊûÑËßÑÂàíÂõæ</div>
                    <el-checkbox v-model="isAllCheckedG" class="scroll-custom-checkbox"
                        @change="handleAllCheckG"></el-checkbox>
                    <div :class="layerContentStyleG == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentG"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleG" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsG" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.name }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeG(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">ÊôØÂå∫ÂàíÂàÜËßÑÂàí</div>
                    <el-checkbox v-model="isAllCheckedH" class="scroll-custom-checkbox"
                        @change="handleAllCheckH"></el-checkbox>
                    <div :class="layerContentStyleH == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentH"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleH" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsH" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.name }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeH(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
            <div class="layerContentA" v-show="showRemarkColumn">
                <div class="layerContentTitle">
                    <div class="layerContentLabel">Â§áÊ≥®‰ø°ÊÅØ</div>
                    <el-checkbox v-model="isAllCheckedRemark" class="scroll-custom-checkbox"
                        @change="handleAllCheckRemark"></el-checkbox>
                    <div :class="layerContentStyleRemark == true ? 'layerContentShow' : 'layerContentHide'"
                        @click="clickLayerContentRemark"></div>
                </div>
                <transition name="fade">
                    <div v-if="layerContentStyleRemark" class="contentBodyA">
                        <div class="scrollContentA">
                            <div class="scrollDetailA" v-for="item in checkItemsRemark" :key="item.id">
                                <div class="scrollDetailFontA">{{ item.layerName }}</div>
                                <el-checkbox v-model="item.checked" class="scroll-custom-checkbox"
                                    @change="handleCheckChangeRemark(item)" />
                            </div>
                        </div>
                    </div>
                </transition>
            </div>
        </div>
    </div>
    <div class="functionPanel" v-show="functionPanelShowHide" v-hasPermi="['screen:function:review']">
        <div class="arrow" :style="arrowStyle"></div>
        <div class="text-container">
            <div class="text-item" @click="selectItem(0)" :class="{ active: isSelected[0] }"
                v-hasPermi="['screen:function:redline']">
                Á∫¢Á∫øÂè†Âä†ÂØπÊØî
            </div>
            <div class="text-item" @click="selectItem(1)" :class="{ active: isSelected[1] }"
                v-hasPermi="['screen:function:splitscreen']">
                ÂàÜÂ±èÊØîÂØπ
            </div>
            <div class="text-item" @click="selectItem(2)" :class="{ active: isSelected[2] }"
                v-hasPermi="['screen:function:analysis']">
                Êó∂Á©∫ÂàÜÊûê
            </div>
        </div>
        <div class="circle-container">
            <div class="circle" :class="{ solid: isSelected[0] }" v-hasPermi="['screen:function:redline']"></div>
            <div class="circle" :class="{ solid: isSelected[1] }" v-hasPermi="['screen:function:splitscreen']"></div>
            <div class="circle" :class="{ solid: isSelected[2] }" v-hasPermi="['screen:function:analysis']"></div>
        </div>
    </div>
    <div class="drawFunctionBody" v-if="drawFunctionShowHide" v-hasPermi="['screen:function:vector']">
        <div :class="drawPointBodyStyle == true ? 'drawPointBodySelected' : 'drawPointBodySelect'"
            @click="clickDrawPoint" v-hasPermi="['screen:function:point']">
            <div class="drawPointImg"></div>
            <div class="drawPointFont">ÁÇπ</div>
        </div>
        <div :class="drawPloylineBodyStyle == true ? 'drawPloylineBodySelected' : 'drawPloylineBodySelect'"
            @click="clickDrawPloyline" v-hasPermi="['screen:function:polyline']">
            <div class="drawPolylineImg"></div>
            <div class="drawPolylineFont">Á∫ø</div>
        </div>
        <div :class="drawPloygonBodyStyle == true ? 'drawPloygonBodySelected' : 'drawPloygonBodySelect'"
            @click="clickDrawPloygon" v-hasPermi="['screen:function:polygon']">
            <div class="drawPloygonImg"></div>
            <div class="drawPloygonFont">Èù¢</div>
        </div>
    </div>
</template>

<script setup>
import { toRefs, reactive, ref, onMounted, onUnmounted, computed, watch } from 'vue' // Êñ∞Â¢û onUnmounted
import bus from '../../libs/eventbus'
import { getMarkList } from "./remark.js";

// Â≠òÂÇ®ÊâÄÊúâÈÄâ‰∏≠ÁöÑÂõæÂ±ÇÂêçÁß∞ÔºàÂéªÈáçÔºâ
const selectedLayerNames = ref([]);
const currentModule = ref('')
const showRemarkColumn = ref(false)

// Ê†∏ÂøÉÊñπÊ≥ïÔºöÊõ¥Êñ∞ÈÄâ‰∏≠ÁöÑÂõæÂ±ÇÂêçÁß∞ÂàóË°®Âπ∂ÂèëÈÄÅ‰∫ã‰ª∂
const updateSelectedLayerNames = () => {
    selectedLayerNames.value = [];
    const allCheckGroups = [
        checkItemsA, checkItemsB, checkItemsC, checkItemsD, checkItemsE,
        checkItemsF, checkItemsG, checkItemsH, checkItemsI, checkItemsJ,
        checkItemsK
    ];
    if (showRemarkColumn.value) {
        allCheckGroups.push(checkItemsRemark);
    }
    allCheckGroups.forEach(group => {
        group.value.forEach(item => {
            if (item.checked) {
                let displayName = '';
                if (item.isRemark || checkItemsRemark.value.includes(item)) {
                    displayName = item.layerName || item.name || item.label;
                } else {
                    displayName = item.label || item.name;
                }
                if (displayName) {
                    selectedLayerNames.value.push(displayName);
                }
            }
        });
    });
    selectedLayerNames.value = [...new Set(selectedLayerNames.value)];
    bus.emit('layerNamesSelected', selectedLayerNames.value);
    bus.emit('legend-visibility', selectedLayerNames.value.length > 0);
    console.log('ÂΩìÂâçÈÄâ‰∏≠ÁöÑÂõæÂ±ÇÂêçÁß∞Ôºö', selectedLayerNames.value);
    console.log('Â§áÊ≥®È°πÈÄâ‰∏≠ÊÉÖÂÜµÔºö', checkItemsRemark.value.filter(item => item.checked));
};

// ÂÖ®ÈÄâÊ°ÜÁä∂ÊÄÅ
const isAllCheckedA = ref(false);
const isAllCheckedB = ref(false);
const isAllCheckedC = ref(false);
const isAllCheckedD = ref(false);
const isAllCheckedE = ref(false);
const isAllCheckedF = ref(false);
const isAllCheckedG = ref(false);
const isAllCheckedH = ref(false);
const isAllCheckedI = ref(false);
const isAllCheckedJ = ref(false);
const isAllCheckedK = ref(false);
const isAllCheckedRemark = ref(false);

// ÂÖ®ÈÄâÊ°Ü‰∫ã‰ª∂Â§ÑÁêÜ
const handleAllCheckA = (isChecked) => {
    checkItemsA.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeA(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckB = (isChecked) => {
    checkItemsB.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeB(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckC = (isChecked) => {
    checkItemsC.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeC(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckD = (isChecked) => {
    checkItemsD.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeD(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckE = (isChecked) => {
    checkItemsE.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeE(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckF = (isChecked) => {
    checkItemsF.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeF(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckG = (isChecked) => {
    checkItemsG.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeG(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckH = (isChecked) => {
    checkItemsH.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeH(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckI = (isChecked) => {
    checkItemsI.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeI(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckJ = (isChecked) => {
    checkItemsJ.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeJ(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckK = (isChecked) => {
    checkItemsK.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeK(item);
    });
    updateSelectedLayerNames();
};
const handleAllCheckRemark = (isChecked) => {
    checkItemsRemark.value.forEach(item => {
        item.checked = isChecked;
        handleCheckChangeRemark(item);
    });
    updateSelectedLayerNames();
    bus.emit('layerNamesSelected', selectedLayerNames.value);
};

// ÂõæÂ±ÇÈÄâÈ°πÊï∞ÊçÆ
const checkItemsA = ref([
    { id: 1, name: '‰∏ÄÁ∫ß‰∫∫ÊñáÊôØÊ∫ê', relicType: 'Ëá™ÁÑ∂È£éÊôØ', checked: false },
    { id: 2, name: '‰∫åÁ∫ß‰∫∫ÊñáÊôØÊ∫ê', relicType: '‰∫∫ÊñáÊôØËßÇ', checked: false },
    { id: 3, name: '‰∏âÁ∫ß‰∫∫ÊñáÊôØÊ∫ê', relicType: 'Âè§Ëøπ‰øùÊä§', checked: false },
    { id: 4, name: '‰∏ÄÁ∫ßËá™ÁÑ∂ÊôØÊ∫ê', relicType: 'Ëá™ÁÑ∂È£éÊôØ', checked: false },
    { id: 5, name: '‰∫åÁ∫ßËá™ÁÑ∂ÊôØÊ∫ê', relicType: '‰∫∫ÊñáÊôØËßÇ', checked: false },
    { id: 6, name: '‰∏âÁ∫ßËá™ÁÑ∂ÊôØÊ∫ê', relicType: 'Âè§Ëøπ‰øùÊä§', checked: false },
    { id: 7, name: 'Ë°åÊîøÊùë', relicType: 'Ë°åÊîøÊùë', checked: false },
    { id: 8, name: 'ÂÅúËΩ¶Âú∫', relicType: 'ÂÅúËΩ¶Âú∫', checked: false },
])
const checkItemsB = ref([
    { id: 1, name: 'Â≤©Ê¥ûÂØ∫Â∫ôÊñáÂåñÊôØÊ∫ê', checked: false },
    { id: 2, name: 'ËÉ°ÂÖ¨ÊñáÂåñÊôØÊ∫ê', checked: false },
    { id: 3, name: '‰π¶Èô¢ÊñáÂåñÊôØÊ∫ê', checked: false },
    { id: 4, name: 'ÊäóÊàòÂéÜÂè≤ÊñáÂåñÊôØÊ∫ê', checked: false },
])
const checkItemsC = ref([
    { id: 1, name: 'ÂØπÂ§ñ‰∫§ÈÄö', checked: false },
    { id: 2, name: 'Êú∫Âä®ËΩ¶ÈÅì', checked: false },
])
const checkItemsD = ref([
    { id: 1, name: '‰∏ÄÁ∫ßËΩ¶Ë°åÈÅì', checked: false },
    { id: 2, name: '‰∏ÄÁ∫ßÊ∏∏Ê≠•ÈÅì', checked: false },
    { id: 3, name: '‰∫åÁ∫ßÊ∏∏Ê≠•ÈÅì', checked: false },
    { id: 4, name: 'ÂÆ¢ËøêÁ¥¢ÈÅì', checked: false },
])
const checkItemsE = ref([{ id: 1, name: '‰∏ªË¶ÅÊôØËßÇÊ∏∏ËµèÁ∫ø', checked: false },])
const checkItemsF = ref([
    { id: 1, label: 'È£éÊôØÊ∏∏ËµèÁî®Âú∞', name: 'ÂúüÂú∞Âà©Áî®Áé∞Áä∂-Áî≤Á±ª', checked: false },
    { id: 2, label: 'ÊóÖÊ∏∏ÊúçÂä°ËÆæÊñΩÁî®Âú∞', name: 'ÂúüÂú∞Âà©Áî®Áé∞Áä∂-‰πôÁ±ª', checked: false },
    { id: 3, label: 'Â±ÖÊ∞ëÁ§æ‰ºöÁî®Âú∞', name: 'ÂúüÂú∞Âà©Áî®Áé∞Áä∂-‰∏ôÁ±ª', checked: false },
    { id: 4, label: '‰∫§ÈÄö‰∏éÂäüËÉΩÁî®Âú∞', name: 'ÂúüÂú∞Âà©Áî®Áé∞Áä∂-‰∏ÅÁ±ª', checked: false },
    { id: 5, label: 'ÊûóÂú∞', name: 'ÂúüÂú∞Âà©Áî®Áé∞Áä∂-ÊàäÁ±ª', checked: false },
    { id: 6, label: 'Âõ≠Âú∞', name: 'ÂúüÂú∞Âà©Áî®Áé∞Áä∂-Â∑±Á±ª', checked: false },
    { id: 7, label: 'ËÄïÂú∞', name: 'ÂúüÂú∞Âà©Áî®Áé∞Áä∂-Â∫öÁ±ª', checked: false },
    { id: 8, label: 'ËçâÂú∞', name: 'ÂúüÂú∞Âà©Áî®Áé∞Áä∂-ËæõÁ±ª', checked: false },
    { id: 9, label: 'Ê∞¥Âüü', name: 'ÂúüÂú∞Âà©Áî®Áé∞Áä∂-Â£¨Á±ª', checked: false },
])
const checkItemsG = ref([
    { id: 1, name: 'ÊôØÁæ§', checked: false },
    { id: 2, name: 'ÊôØÂå∫ÂàÜÂå∫', checked: false },
])
const checkItemsH = ref([
    { id: 1, name: 'ÁÅµÂ≤©Â±±ÊπñÊôØÂå∫', checked: false },
    { id: 2, name: 'ÊñπÂ±±Â±±ÊûóÊôØÂå∫', checked: false },
    { id: 3, name: 'ÊñπÂ≤©‰∏πÈúûÊôØÂå∫', checked: false },
])
const checkItemsI = ref([
    { id: 1, name: '‰∏ÄÁ∫ß‰øùÊä§Âå∫', checked: false },
    { id: 2, name: '‰∫åÁ∫ß‰øùÊä§Âå∫', checked: false },
    { id: 3, name: '‰∏âÁ∫ß‰øùÊä§Âå∫', checked: false },
])
const checkItemsJ = ref([
    { id: 1, name: 'ÁîüÊÄÅ‰øùÊä§Á∫¢Á∫ø', checked: false },
])
const checkItemsK = ref([
    { id: 1, name: 'ÊñπÂ≤©È£éÊôØÂêçËÉúÂå∫ËåÉÂõ¥_16Áâà', checked: false },
    { id: 2, name: 'ÊñπÂ≤©È£éÊôØÂêçËÉúÂå∫ÊÄª‰ΩìËßÑÂàíËåÉÂõ¥', checked: false },
])
const checkItemsRemark = ref([])

// ÈÄöÁî®Â§çÈÄâÊ°Ü‰∫ã‰ª∂Â§ÑÁêÜ
const handleCheckChangeCommon = (item, layerType) => {
    console.log(`Item ${item.id} (${layerType}) checked: ${item.checked}`);
    bus.emit('layerCheckMessage', {
        id: item.id,
        name: item.name,
        checked: item.checked,
        layerType: layerType
    });
};

// Âçï‰∏™Â§çÈÄâÊ°Ü‰∫ã‰ª∂Â§ÑÁêÜ
const handleCheckChangeA = item => {
    console.log(`Item ${item.id} checked: ${item.checked}`)
    bus.emit('attractionTypeMessage', item)
    updateSelectedLayerNames();
}
const handleCheckChangeB = item => {
    console.log(`Item ${item.id} checked: ${item.checked}`)
    bus.emit('cultureTypeMessage', item)
    updateSelectedLayerNames();
}
const handleCheckChangeC = (item) => {
    handleCheckChangeCommon(item, 'Line')
    updateSelectedLayerNames();
};
const handleCheckChangeD = (item) => {
    handleCheckChangeCommon(item, 'Line')
    updateSelectedLayerNames();
};
const handleCheckChangeE = (item) => {
    handleCheckChangeCommon(item, 'Line')
    updateSelectedLayerNames()
};
const handleCheckChangeF = (item) => {
    handleCheckChangeCommon(item, 'Area')
    updateSelectedLayerNames()
};
const handleCheckChangeG = (item) => {
    handleCheckChangeCommon(item, 'Area')
    updateSelectedLayerNames()
};
const handleCheckChangeH = (item) => {
    handleCheckChangeCommon(item, 'Area')
    updateSelectedLayerNames()
};
const handleCheckChangeI = (item) => {
    handleCheckChangeCommon(item, 'Area')
    updateSelectedLayerNames()
};
const handleCheckChangeJ = (item) => {
    handleCheckChangeCommon(item, 'Area')
    updateSelectedLayerNames()
};
const handleCheckChangeK = (item) => {
    handleCheckChangeCommon(item, 'Area')
    updateSelectedLayerNames()
};
const handleCheckChangeRemark = item => {
    console.log(`Item ${item.id} checked: ${item.checked}`)
    bus.emit('remarkMessage', item)
    updateSelectedLayerNames()
}

// ÂõæÂ±ÇÂ±ïÂºÄ/ÊäòÂè†‰∫ã‰ª∂
const clickLayerContentA = () => {
    layerContentStyleA.value = !layerContentStyleA.value
}
const clickLayerContentB = () => {
    layerContentStyleB.value = !layerContentStyleB.value
}
const clickLayerContentC = () => {
    layerContentStyleC.value = !layerContentStyleC.value
}
const clickLayerContentD = () => {
    layerContentStyleD.value = !layerContentStyleD.value
}
const clickLayerContentE = () => {
    layerContentStyleE.value = !layerContentStyleE.value
}
const clickLayerContentF = () => {
    layerContentStyleF.value = !layerContentStyleF.value
}
const clickLayerContentG = () => {
    layerContentStyleG.value = !layerContentStyleG.value
}
const clickLayerContentH = () => {
    layerContentStyleH.value = !layerContentStyleH.value
}
const clickLayerContentI = () => {
    layerContentStyleI.value = !layerContentStyleI.value
}
const clickLayerContentJ = () => {
    layerContentStyleJ.value = !layerContentStyleJ.value
}
const clickLayerContentK = () => {
    layerContentStyleK.value = !layerContentStyleK.value
}
const clickLayerContentRemark = () => {
    layerContentStyleRemark.value = !layerContentStyleRemark.value
}

// ÁîüÊÄÅ‰øùÊä§Á∫¢Á∫øÂçïÁã¨ÈÄâ‰∏≠ÈÄªËæë
const setOnlyEcoRedlineChecked = (isChecked) => {
    checkItemsJ.value.forEach((item) => {
        item.checked = isChecked;
        handleCheckChangeJ(item);
    });
    isAllCheckedJ.value = isChecked;
    layerContentStyleJ.value = isChecked;

    [isAllCheckedA, isAllCheckedB, isAllCheckedC, isAllCheckedD, isAllCheckedE,
        isAllCheckedF, isAllCheckedG, isAllCheckedH, isAllCheckedI, isAllCheckedK].forEach(checkedRef => {
            checkedRef.value = false;
        });
    [layerContentStyleA, layerContentStyleB, layerContentStyleC, layerContentStyleD, layerContentStyleE,
        layerContentStyleF, layerContentStyleG, layerContentStyleH, layerContentStyleI, layerContentStyleK].forEach(styleRef => {
            styleRef.value = false;
        });

    checkItemsRemark.value.forEach(item => item.checked = false);
    isAllCheckedRemark.value = false;
    layerContentStyleRemark.value = false;
    updateSelectedLayerNames();
};

// ÂäüËÉΩÈù¢ÊùøÈÄâ‰∏≠Áä∂ÊÄÅ
const isSelected = ref({
    0: false,
    1: false,
    2: false
})

// ÂäüËÉΩÈù¢ÊùøÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
const selectItem = (index) => {
    isSelected.value[index] = !isSelected.value[index]
    if (index === 0) {
        layerManagementShowHide.value = true
        setOnlyEcoRedlineChecked(isSelected.value[index]);
    } else if (index === 1) {
        layerManagementShowHide.value = false
    } else {
        layerManagementShowHide.value = true
    }
    bus.emit('function-panel-clicked', { index, isSelected: isSelected.value[index] })
}

// ÁÆ≠Â§¥Ê†∑ÂºèËÆ°ÁÆó
const arrowStyle = computed(() => {
    const topValues = [
        '2px',
        '43px',
        '83px'
    ]
    let lastSelectedIndex = -1
    for (let i = 2; i >= 0; i--) {
        if (isSelected.value[i]) {
            lastSelectedIndex = i
            break
        }
    }
    return {
        top: lastSelectedIndex > -1 ? topValues[lastSelectedIndex] : '2px',
        display: lastSelectedIndex > -1 ? 'block' : 'none',
        transition: 'top 0.3s ease, display 0.3s ease'
    }
})

// ÁªòÂà∂ÂäüËÉΩÁä∂ÊÄÅ
const layerManagementShowHide = ref(false)
const functionPanelShowHide = ref(false)
const layerContentStyleA = ref(true)
const layerContentStyleB = ref(false)
const layerContentStyleC = ref(false)
const layerContentStyleD = ref(false)
const layerContentStyleE = ref(false)
const layerContentStyleF = ref(false)
const layerContentStyleG = ref(false)
const layerContentStyleH = ref(false)
const layerContentStyleI = ref(false)
const layerContentStyleJ = ref(false)
const layerContentStyleK = ref(false)
const layerContentStyleRemark = ref(false)
const drawFunctionShowHide = ref(false)
const drawPloygonBodyStyle = ref(false)
const drawPloylineBodyStyle = ref(false)
const drawPointBodyStyle = ref(false)

// ÁªòÂà∂ÂäüËÉΩÁÇπÂáª‰∫ã‰ª∂
const clickDrawPloygon = () => {
    drawPloygonBodyStyle.value = !drawPloygonBodyStyle.value
    if (drawPloygonBodyStyle.value) {
        drawPointBodyStyle.value = false
        drawPloylineBodyStyle.value = false
    }
    bus.emit('draw-polygon-clicked', drawPloygonBodyStyle.value)
}
const clickDrawPloyline = () => {
    drawPloylineBodyStyle.value = !drawPloylineBodyStyle.value
    if (drawPloylineBodyStyle.value) {
        drawPointBodyStyle.value = false
        drawPloygonBodyStyle.value = false
    }
    bus.emit('draw-polyline-clicked', drawPloylineBodyStyle.value)
}
const clickDrawPoint = () => {
    drawPointBodyStyle.value = !drawPointBodyStyle.value
    if (drawPointBodyStyle.value) {
        drawPloylineBodyStyle.value = false
        drawPloygonBodyStyle.value = false
    }
    bus.emit('draw-point-clicked', drawPointBodyStyle.value)
}

// ÁõëÂê¨Â≠êÈ°πÂèòÂåñÂêåÊ≠•ÂÖ®ÈÄâÊ°Ü
watch(
    () => checkItemsA.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedA.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsB.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedB.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsC.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedC.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsD.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedD.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsE.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedE.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsF.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedF.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsG.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedG.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsH.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedH.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsI.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedI.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsJ.value[0]?.checked,
    (isChecked) => {
        if (isChecked !== undefined) {
            isSelected.value[0] = isChecked;
        }
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsK.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedK.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);
watch(
    () => checkItemsRemark.value.map(item => item.checked),
    (checkedList) => {
        isAllCheckedRemark.value = checkedList.every(checked => checked);
        updateSelectedLayerNames();
    },
    { deep: true }
);

// ========== ÊèêÂèñBusÂõûË∞É‰∏∫ÂëΩÂêçÂáΩÊï∞ÔºàÁ≤æÂáÜËß£ÁªëÔºâ ==========
const handleSchemeReviewClicked = (data) => {
    console.log('ÊñπÊ°àÂÆ°Êü•ÂèØËßÅÊÄß:', data)
    const { isShow, module } = data
    currentModule.value = module
    layerManagementShowHide.value = isShow
    functionPanelShowHide.value = isShow
    showRemarkColumn.value = false
    if (!isShow) {
        drawFunctionShowHide.value = isShow
    } else {
        drawFunctionShowHide.value = false
    }
    getMarkList().then((res) => {
        checkItemsRemark.value = res.rows
        bus.emit('updateRemarkLegend', res.rows);
        checkItemsRemark.value.forEach(item => item.checked = false);
        isAllCheckedRemark.value = false;
        layerContentStyleRemark.value = false;
        updateSelectedLayerNames();
    }).catch((error) => {
        console.error('Ëé∑ÂèñÊ†áÊ≥®‰ø°ÊÅØÂ§±Ë¥•', error);
    });
}

const handlePlanningAchievementClicked = (data) => {
    const { isShow, module } = data
    console.log("üöÄ ~ handlePlanningAchievementClicked ~ isShow:", isShow)
    currentModule.value = module
    layerManagementShowHide.value = isShow
    functionPanelShowHide.value = false
    showRemarkColumn.value = true
    if (isShow) {
        // ÈÅøÂÖçÈáçÂ§çÂàáÊç¢Ôºö‰ªÖÂΩìÊú™ÈÄâ‰∏≠Êó∂ÊâçËß¶ÂèëÈÄâ‰∏≠
        if (!isSelected.value[2]) {
            isSelected.value[2] = true // Áõ¥Êé•ËÆæÁΩÆÈÄâ‰∏≠Áä∂ÊÄÅÔºàÈÅøÂÖçtoggleÂèçËΩ¨Ôºâ
            // Ëß¶ÂèëÊó∂Á©∫ÂàÜÊûêÈÄâ‰∏≠ÁöÑ‰∏öÂä°ÈÄªËæë
            layerManagementShowHide.value = true
            bus.emit('function-panel-clicked', { index: 2, isSelected: true })
        }
    } else {
        // ËßÑÂàíÊàêÊûúÈöêËóèÊó∂ÔºåÂèñÊ∂àÊó∂Á©∫ÂàÜÊûêÈÄâ‰∏≠
        if (isSelected.value[2]) {
            isSelected.value[2] = false
            bus.emit('function-panel-clicked', { index: 2, isSelected: false })
        }
    }
    getMarkList().then((res) => {
        const formattedRemark = res.rows.map(item => ({
            ...item,
            layerName: item.layerName || item.name || `Êú™ÂëΩÂêçÂ§áÊ≥®${item.id}`,
            checked: item.checked || false,
            rgb: item.rgb || 'rgb(252, 218, 78)'
        }));
        checkItemsRemark.value = formattedRemark;
        bus.emit('updateRemarkLegend', formattedRemark);
        updateSelectedLayerNames();
    }).catch((error) => {
        console.error('Ëé∑ÂèñÊ†áÊ≥®‰ø°ÊÅØÂ§±Ë¥•', error);
    });
}

const handleVectorLayerClicked = (isVisible) => {
    drawFunctionShowHide.value = isVisible
    if (isVisible == false) {
        layerManagementShowHide.value = false
        functionPanelShowHide.value = false
    } else {
        layerManagementShowHide.value = false
        functionPanelShowHide.value = false
    }
}

// ========== ÊåÇËΩΩ/Âç∏ËΩΩÁîüÂëΩÂë®Êúü ==========
onMounted(() => {
    updateSelectedLayerNames();
    setOnlyEcoRedlineChecked(isSelected.value[0]);
    isAllCheckedRemark.value = false;
    // ÁªëÂÆöBus‰∫ã‰ª∂ÔºàÂëΩÂêçÂáΩÊï∞Ôºâ
    bus.on('scheme-review-clicked', handleSchemeReviewClicked);
    bus.on('planning-achievement-clicked', handlePlanningAchievementClicked);
    bus.on('vector-layer-clicked', handleVectorLayerClicked);
})

onUnmounted(() => {
    // ========== 1. Á≤æÂáÜËß£ÁªëÊâÄÊúâBus‰∫ã‰ª∂ ==========
    bus.off('scheme-review-clicked', handleSchemeReviewClicked);
    bus.off('planning-achievement-clicked', handlePlanningAchievementClicked);
    bus.off('vector-layer-clicked', handleVectorLayerClicked);

    // ========== 2. ÈáçÁΩÆÊâÄÊúâÂìçÂ∫îÂºèÁä∂ÊÄÅ ==========
    // Âü∫Á°ÄÁä∂ÊÄÅ
    selectedLayerNames.value = [];
    currentModule.value = '';
    showRemarkColumn.value = false;

    // ÂÖ®ÈÄâÊ°ÜÁä∂ÊÄÅ
    isAllCheckedA.value = false;
    isAllCheckedB.value = false;
    isAllCheckedC.value = false;
    isAllCheckedD.value = false;
    isAllCheckedE.value = false;
    isAllCheckedF.value = false;
    isAllCheckedG.value = false;
    isAllCheckedH.value = false;
    isAllCheckedI.value = false;
    isAllCheckedJ.value = false;
    isAllCheckedK.value = false;
    isAllCheckedRemark.value = false;

    // ÂõæÂ±ÇÂ±ïÂºÄ/ÊäòÂè†Áä∂ÊÄÅ
    layerContentStyleA.value = false;
    layerContentStyleB.value = false;
    layerContentStyleC.value = false;
    layerContentStyleD.value = false;
    layerContentStyleE.value = false;
    layerContentStyleF.value = false;
    layerContentStyleG.value = false;
    layerContentStyleH.value = false;
    layerContentStyleI.value = false;
    layerContentStyleJ.value = false;
    layerContentStyleK.value = false;
    layerContentStyleRemark.value = false;

    // ÁªòÂà∂ÂäüËÉΩÁä∂ÊÄÅ
    drawFunctionShowHide.value = false;
    drawPloygonBodyStyle.value = false;
    drawPloylineBodyStyle.value = false;
    drawPointBodyStyle.value = false;

    // ÂäüËÉΩÈù¢ÊùøÁä∂ÊÄÅ
    layerManagementShowHide.value = false;
    functionPanelShowHide.value = false;
    isSelected.value = { 0: false, 1: false, 2: false };

    // Ê∏ÖÁ©∫ÊâÄÊúâÂ§çÈÄâÊ°ÜÈÄâ‰∏≠Áä∂ÊÄÅ
    [
        checkItemsA, checkItemsB, checkItemsC, checkItemsD, checkItemsE,
        checkItemsF, checkItemsG, checkItemsH, checkItemsI, checkItemsJ,
        checkItemsK, checkItemsRemark
    ].forEach(group => {
        group.value.forEach(item => item.checked = false);
    });

    // ========== 3. ÂÖúÂ∫ïÊ∏ÖÁêÜDOM‰∫ã‰ª∂ ==========
    const rightSidebar = document.querySelector('.rightSidebar');
    const functionPanel = document.querySelector('.functionPanel');
    const drawFunctionBody = document.querySelector('.drawFunctionBody');
    if (rightSidebar) rightSidebar.onclick = null;
    if (functionPanel) functionPanel.onclick = null;
    if (drawFunctionBody) drawFunctionBody.onclick = null;

    // ========== 4. ÈÄöÁü•ÂÖ∂‰ªñÁªÑ‰ª∂ÈáçÁΩÆÁä∂ÊÄÅ ==========
    bus.emit('layerNamesSelected', []);
    bus.emit('legend-visibility', false);
    bus.emit('function-panel-clicked', { index: -1, isSelected: false });
})
</script>

<style lang="scss" scoped>
.rightSidebar {
    pointer-events: auto;
    position: absolute;
    width: 312px;
    height: 488px;
    top: 14.26%;
    right: 6%;
    z-index: 2;
    background: url(../../static/image/right/layer-bg.png) no-repeat;
    background-size: 100% 100%;

    .layerTitle {
        margin-left: 34px;
        margin-top: 31px;
        width: 246px;
        height: 36px;
        background: url(../../static/image/right/layer-title.png) no-repeat;
        background-size: 100% 100%;
        display: flex;
        justify-content: center;
        align-content: center;

        .layerTitleFont {
            width: 92px;
            height: 32px;
            font-family: 'xianglifang';
            font-weight: 400;
            font-size: 24px;
            color: #ffffff;
            line-height: 36px;
            text-shadow: 2px 0px 6px #0e0f19;
            text-align: center;
            letter-spacing: 3px;
        }
    }

    .layerContentBody {
        width: 95%;
        height: 410px;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
        padding: 0 5px;

        &::-webkit-scrollbar {
            width: 6px;
        }

        &::-webkit-scrollbar-thumb {
            background-color: rgba(255, 207, 112, 0.01);
            border-radius: 3px;
        }

        &::-webkit-scrollbar-track {
            background-color: transparent;
        }

        .layerContentA {
            margin-top: 10px;

            .layerContentTitle {
                position: relative;
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                width: 85%;
                height: 34px;
                margin-left: 18px;

                .scroll-custom-checkbox {
                    position: absolute;
                    right: 35px;
                    top: 50%;
                    transform: translateY(-50%);
                    margin: 0;
                    z-index: 1;

                    :deep(.el-checkbox__inner) {
                        width: 17px;
                        height: 17px;
                        background-color: transparent;
                        border: 2px solid #76602f;
                    }

                    :deep(.el-checkbox__inner::after) {
                        width: 6px;
                        height: 8px;
                        border: 3px solid #89df4a;
                        border-left: 0;
                        border-top: 0;
                    }
                }

                .layerContentLabel {
                    margin-left: 15px;
                    font-family: 'SourceHanSansCN-Medium';
                    font-weight: 500;
                    font-size: 18px;
                    color: #ece1b9;
                    line-height: 36px;
                    text-shadow: 2px 1px 8px #ffed59;
                    text-align: left;
                    font-style: normal;
                    text-transform: none;
                    background: linear-gradient(to bottom, #ffffff, #ffcf70);
                    -webkit-background-clip: text;
                    background-clip: text;
                    color: transparent;
                }

                .layerContentShow {
                    cursor: pointer;
                    width: 22px;
                    height: 28px;
                    background: url(../../static/image/right/down.png) no-repeat;
                    background-size: 100% 100%;
                }

                .layerContentHide {
                    cursor: pointer;
                    width: 28.1px;
                    height: 22px;
                    background: url(../../static/image/right/left.png) no-repeat;
                    background-size: 100% 100%;
                }
            }

            .contentBodyA {
                overflow: hidden;
            }

            .scrollContentA {
                width: 77%;
                max-height: 110px;
                overflow-y: auto;

                &::-webkit-scrollbar {
                    width: 6px;
                }

                &::-webkit-scrollbar-thumb {
                    background-color: rgba(255, 207, 112, 0.01);
                    border-radius: 3px;
                }

                &::-webkit-scrollbar-track {
                    background-color: transparent;
                }

                font-family: 'SourceHanSansCN-Medium';
                font-weight: 400;
                font-size: 15px;
                color: #ffffff;
                line-height: 36px;
                display: flex;
                flex-direction: column;
                margin-left: 40px;

                .scrollDetailA {
                    width: 100%;
                    height: 30px;
                    display: flex;
                    flex-direction: row;
                    justify-content: space-between;

                    .scrollDetailFontA {
                        margin-left: 5px;
                    }

                    .scroll-custom-checkbox {
                        margin-top: 5px;

                        :deep(.el-checkbox__inner) {
                            width: 17px;
                            height: 17px;
                            background-color: transparent;
                            border: 2px solid #76602f;
                        }

                        :deep(.el-checkbox__inner::after) {
                            width: 6px;
                            height: 8px;
                            border: 3px solid #89df4a;
                            border-left: 0;
                            border-top: 0;
                        }
                    }
                }
            }
        }
    }
}

.functionPanel {
    pointer-events: auto;
    position: absolute;
    width: 220px;
    height: 113px;
    top: 82.04%;
    right: 6.25%;
    z-index: 2;
    display: flex;
    flex-direction: row;
    align-items: center;

    .arrow {
        width: 42px;
        height: 44px;
        background: url(../../static/image/right/arrow.png) no-repeat;
        background-size: 100% 100%;
        position: absolute;
        left: 0;
        transition: top 0.3s ease;
    }

    .text-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        margin-right: 20px;
        margin-left: 40px;

        .text-item {
            width: 147px;
            height: 28px;
            font-family: 'xianglifang';
            font-weight: 400;
            font-size: 24px;
            color: #f5e4c4;
            text-align: right;
            font-style: italic;
            text-decoration-line: underline;
            text-transform: none;
            line-height: 28px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: font-size 0.3s ease;

            &.active {
                font-size: 30px;
                color: #ffa621;
            }
        }

        .text-item:last-child {
            margin-bottom: 0;
        }
    }

    .circle-container {
        display: flex;
        flex-direction: column;
        justify-content: center;

        .circle {
            width: 9px;
            height: 9px;
            border: 1px solid #ffa621;
            border-radius: 50%;
            margin-bottom: 12px;
            background-color: transparent;
            transition: background-color 0.3s ease, border 0.3s ease;
            margin-top: 20px;
        }

        .circle.solid {
            background-color: #ffa621;
            border: none;
            width: 10px;
            height: 10px;
        }
    }
}

.drawFunctionBody {
    pointer-events: auto;
    position: absolute;
    width: 71px;
    height: 295px;
    top: 62.28%;
    right: 5.25%;
    z-index: 2;
    display: flex;
    flex-direction: column;

    .drawPointBodySelect,
    .drawPointBodySelected {
        cursor: pointer;
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;

        .drawPointImg {
            width: 56px;
            height: 56px;
            background-size: 100% 100%;
        }

        .drawPointFont {
            font-family: 'xianglifang';
            font-weight: 400;
            font-size: 24px;
            margin-top: 5px;
            width: 71px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    }

    .drawPointBodySelect .drawPointImg {
        background: url(../../static/image/right/draw-select.png) no-repeat;
        background-size: 100% 100%;
    }

    .drawPointBodySelect .drawPointFont {
        color: #35803b;
    }

    .drawPointBodySelected .drawPointImg {
        background: url(../../static/image/right/draw-selected.png) no-repeat;
        background-size: 100% 100%;
    }

    .drawPointBodySelected .drawPointFont {
        color: #f3dfa9;
        background: url(../../static/image/right/font-selected.png) no-repeat;
        background-size: 100% 100%;
    }

    .drawPloylineBodySelect,
    .drawPloylineBodySelected {
        cursor: pointer;
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;

        .drawPolylineImg {
            width: 56px;
            height: 56px;
            background-size: 100% 100%;
        }

        .drawPolylineFont {
            font-family: 'xianglifang';
            font-weight: 400;
            font-size: 24px;
            margin-top: 5px;
            width: 71px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    }

    .drawPloylineBodySelect .drawPolylineImg {
        background: url(../../static/image/right/draw-select.png) no-repeat;
        background-size: 100% 100%;
    }

    .drawPloylineBodySelect .drawPolylineFont {
        color: #35803b;
    }

    .drawPloylineBodySelected .drawPolylineImg {
        background: url(../../static/image/right/draw-selected.png) no-repeat;
        background-size: 100% 100%;
    }

    .drawPloylineBodySelected .drawPolylineFont {
        color: #f3dfa9;
        background: url(../../static/image/right/font-selected.png) no-repeat;
        background-size: 100% 100%;
    }

    .drawPloygonBodySelect,
    .drawPloygonBodySelected {
        cursor: pointer;
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;

        .drawPloygonImg {
            width: 56px;
            height: 56px;
            background-size: 100% 100%;
        }

        .drawPloygonFont {
            font-family: 'xianglifang';
            font-weight: 400;
            font-size: 24px;
            margin-top: 5px;
            width: 71px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    }

    .drawPloygonBodySelect .drawPloygonImg {
        background: url(../../static/image/right/draw-select.png) no-repeat;
        background-size: 100% 100%;
    }

    .drawPloygonBodySelect .drawPloygonFont {
        color: #35803b;
    }

    .drawPloygonBodySelected .drawPloygonImg {
        background: url(../../static/image/right/draw-selected.png) no-repeat;
        background-size: 100% 100%;
    }

    .drawPloygonBodySelected .drawPloygonFont {
        color: #f3dfa9;
        background: url(../../static/image/right/font-selected.png) no-repeat;
        background-size: 100% 100%;
    }
}
</style>